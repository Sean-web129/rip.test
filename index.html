<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>RPI — Relationship Index Test (Demo)</title>
<style>
  /* Responsive layout fixes - paste entire <style> contents with this */
:root{
  --max-card: 920px;
  --gutter: 20px;
  --accent: #ff3b61;
  --muted: #666;
  --bg: #fff;
}
*{box-sizing:border-box}
html,body{height:100%; margin:0; padding:0; background:var(--bg); font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;}
body{padding:var(--gutter); display:flex; align-items:flex-start; justify-content:center;}

/* Card container: fluid and centered, with comfortable max width */
.card{
  width:100%;
  max-width:var(--max-card);
  margin:12px auto;
  border-radius:12px;
  padding:18px;
  border:1px solid #eee;
  box-shadow:0 6px 18px rgba(0,0,0,0.03);
  background:white;
}

/* Typography */
h1{margin:0 0 8px; font-size:clamp(18px,2.4vw,24px); color:#d6336c}
p.lead{margin:6px 0 18px; color:#444}

/* Questions & scale layout */
.question{margin:14px 0}
.q-title{margin-bottom:8px; font-weight:600; font-size:clamp(14px,1.6vw,16px)}
.scale{display:flex; gap:8px; flex-wrap:wrap; align-items:center}

/* Make each scale option flexible so on desktop they sit in a line,
   on narrow screens they wrap and remain tappable */
.scale label{
  flex:1 1 48px;            /* allow growth and shrink */
  min-width:40px;
  text-align:center;
  background:#f6f6f6;
  padding:8px 10px;
  border-radius:8px;
  cursor:pointer;
  border:1px solid transparent;
  user-select:none;
}

/* hide default radio */
.scale input{display:none}
.scale input:checked + span{background:#ffdfe9; border-color:#e68ab1}

/* Controls */
.controls{display:flex; gap:12px; margin-top:18px; flex-wrap:wrap}
button{padding:10px 16px; border-radius:10px; border:0; cursor:pointer; font-weight:600}
.primary{background:var(--accent); color:#fff}
.secondary{background:#f1f1f1; color:#333}

/* Result box */
.result{margin-top:20px; padding:16px; border-radius:12px; background:#fff7fb; border:1px solid #ffd8e8}
.subscore{margin:8px 0}

/* Footer */
.footer{font-size:12px; color:var(--muted); margin-top:14px}

/* Responsive tweaks for very small screens */
@media (max-width:520px){
  body{padding:12px}
  .card{padding:14px}
  .scale label{flex-basis:18%; min-width:34px}
  .controls{gap:8px}
}
</style>
</head>

<body>
<div class="card" id="app">
  <h1>RPI — Relationship Index Test (Demo)</h1>
  <p class="lead">A quick 8-item psychological insight tool measuring control, jealousy, dependence & insecurity.</p>

  <form id="quiz">

    <!-- Q1 -->
    <div class="question" data-key="control">
      <div class="q-title">1. I try to control who my partner talks to.</div>
      <div class="scale">
        <label><input type="radio" name="q1" value="1"><span>1</span></label>
        <label><input type="radio" name="q1" value="2"><span>2</span></label>
        <label><input type="radio" name="q1" value="3"><span>3</span></label>
        <label><input type="radio" name="q1" value="4"><span>4</span></label>
        <label><input type="radio" name="q1" value="5"><span>5</span></label>
      </div>
    </div>

    <!-- Q2 -->
    <div class="question" data-key="jealousy">
      <div class="q-title">2. I feel jealous when my partner talks to others.</div>
      <div class="scale">
        <label><input type="radio" name="q2" value="1"><span>1</span></label>
        <label><input type="radio" name="q2" value="2"><span>2</span></label>
        <label><input type="radio" name="q2" value="3"><span>3</span></label>
        <label><input type="radio" name="q2" value="4"><span>4</span></label>
        <label><input type="radio" name="q2" value="5"><span>5</span></label>
      </div>
    </div>

    <!-- Q3 -->
    <div class="question" data-key="dependence">
      <div class="q-title">3. I rely on my partner to feel emotionally stable.</div>
      <div class="scale">
        <label><input type="radio" name="q3" value="1"><span>1</span></label>
        <label><input type="radio" name="q3" value="2"><span>2</span></label>
        <label><input type="radio" name="q3" value="3"><span>3</span></label>
        <label><input type="radio" name="q3" value="4"><span>4</span></label>
        <label><input type="radio" name="q3" value="5"><span>5</span></label>
      </div>
    </div>

    <!-- Q4 -->
    <div class="question" data-key="insecurity">
      <div class="q-title">4. I often worry that my relationship is not secure.</div>
      <div class="scale">
        <label><input type="radio" name="q4" value="1"><span>1</span></label>
        <label><input type="radio" name="q4" value="2"><span>2</span></label>
        <label><input type="radio" name="q4" value="3"><span>3</span></label>
        <label><input type="radio" name="q4" value="4"><span>4</span></label>
        <label><input type="radio" name="q4" value="5"><span>5</span></label>
      </div>
    </div>

    <!-- Q5 -->
    <div class="question" data-key="control">
      <div class="q-title">5. I tell my partner what to wear or how to behave.</div>
      <div class="scale">
        <label><input type="radio" name="q5" value="1"><span>1</span></label>
        <label><input type="radio" name="q5" value="2"><span>2</span></label>
        <label><input type="radio" name="q5" value="3"><span>3</span></label>
        <label><input type="radio" name="q5" value="4"><span>4</span></label>
        <label><input type="radio" name="q5" value="5"><span>5</span></label>
      </div>
    </div>

    <!-- Q6 -->
    <div class="question" data-key="jealousy">
      <div class="q-title">6. I check my partner's phone or messages without permission.</div>
      <div class="scale">
        <label><input type="radio" name="q6" value="1"><span>1</span></label>
        <label><input type="radio" name="q6" value="2"><span>2</span></label>
        <label><input type="radio" name="q6" value="3"><span>3</span></label>
        <label><input type="radio" name="q6" value="4"><span>4</span></label>
        <label><input type="radio" name="q6" value="5"><span>5</span></label>
      </div>
    </div>

    <!-- Q7 -->
    <div class="question" data-key="dependence">
      <div class="q-title">7. I feel anxious when my partner is not around.</div>
      <div class="scale">
        <label><input type="radio" name="q7" value="1"><span>1</span></label>
        <label><input type="radio" name="q7" value="2"><span>2</span></label>
        <label><input type="radio" name="q7" value="3"><span>3</span></label>
        <label><input type="radio" name="q7" value="4"><span>4</span></label>
        <label><input type="radio" name="q7" value="5"><span>5</span></label>
      </div>
    </div>

    <!-- Q8 -->
    <div class="question" data-key="insecurity">
      <div class="q-title">8. I worry my partner might leave me even without signs.</div>
      <div class="scale">
        <label><input type="radio" name="q8" value="1"><span>1</span></label>
        <label><input type="radio" name="q8" value="2"><span>2</span></label>
        <label><input type="radio" name="q8" value="3"><span>3</span></label>
        <label><input type="radio" name="q8" value="4"><span>4</span></label>
        <label><input type="radio" name="q8" value="5"><span>5</span></label>
      </div>
    </div>

    <div class="controls">
      <button type="button" id="calc" class="primary">Get my report</button>
      <button type="button" id="reset" class="secondary">Reset</button>
    </div>

  </form>

  <div id="output"></div>

  <div class="footer">
    This tool is for entertainment/insight only. Not a clinical diagnosis.
  </div>
</div>

<script>
  const mapping = {
